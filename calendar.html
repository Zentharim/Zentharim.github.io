<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strength of Thousands</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="header-container"></div>

    <div class="container">
        <div id="sidebar-container"></div>
                

        <main class="content">
            <h1>Calendario Accademico</h1>
            <p>Tieni traccia del tempo, delle lezioni e degli eventi importanti della Magaambya.</p>
            
            <hr>
            <!--<h2 id="anno-4722">Anno 4722 (AR)</h2>

            <h3>Festival dell'Equinozio di Primavera</h3>
            <table class="calendar-table">
                <thead>
                    <tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr>
                </thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Jatembe & the Ten Magic Warriors</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td class="has-event">7<br><span class="event">Antenati</span></td></tr>
                </tbody>
            </table>

            <h3>Stambecco (Primavera)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Serpente (Primavera)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Ragno (Primavera)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Festival del Solstizio d'Estate</h3>
            <table class="calendar-table">
                <thead>
                    <tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr>
                </thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Jatembe & the Ten Magic Warriors</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td class="has-event">7<br><span class="event">Antenati</span></td></tr>
                </tbody>
            </table>

            <h3>Zanne (Estate)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Jatembe (Estate)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Magaambya (Estate)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Festival dell'Equinozio d'Autunno</h3>
            <table class="calendar-table">
                <thead>
                    <tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr>
                </thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Jatembe & the Ten Magic Warriors</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td class="has-event">7<br><span class="event">Antenati</span></td></tr>
                </tbody>
            </table>

            <h3>Nibbio (Autunno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Leopardo (Autunno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Toro (Autunno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Festival del Solstizio d'Inverno</h3>
            <table class="calendar-table">
                <thead>
                    <tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr>
                </thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Jatembe & the Ten Magic Warriors</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td class="has-event">7<br><span class="event">Antenati</span></td></tr>
                </tbody>
            </table>

            <h3>Rana (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Colloquio con Takulu</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Airone (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Elefante (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>-->

            <h2 id="anno-4721">Anno 4721 (AR)</h2>
            <h3>Festival del Solstizio d'Inverno</h3>
            <table class="calendar-table">
                <thead>
                    <tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr>
                </thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Jatembe & the Ten Magic Warriors</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td class="has-event">7<br><span class="event">Antenati</span></td></tr>
                </tbody>
            </table>

            <h3>Rana (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td class="has-event">1<br><span class="event">Colloquio con Takulu</span></td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Airone (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

            <h3>Elefante (Inverno)</h3>
            <table class="calendar-table">
                <thead><tr><th>Giorno del Sole</th><th>Giorno della Luna</th><th>Giorno del Lavoro</th><th>Giorno del Benessere</th><th>Giorno del Giuramento</th><th>Giorno del Fuoco</th><th>Giorno delle Stelle</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td></tr>
                    <tr><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td></tr>
                    <tr><td>15</td><td>16</td><td>17</td><td>18</td><td>19</td><td>20</td><td>21</td></tr>
                    <tr><td>22</td><td>23</td><td>24</td><td>25</td><td>26</td><td>27</td><td>28</td></tr>
                </tbody>
            </table>

        </main>
    </div>
<script>

        function initHeader() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    const items = document.querySelectorAll('.sidebar li');
                    items.forEach(li => {
                        const text = li.textContent.trim().toLowerCase();
                        if (text.includes(query)) {
                            li.style.display = '';
                            let parent = li.parentElement;
                            while (parent && parent.classList.contains('submenu')) {
                                parent.style.display = 'block';
                                parent = parent.parentElement.closest('li');
                            }
                        } else {
                            li.style.display = 'none';
                        }
                    });
                });
            }
        }

        function initSidebar() {
            const toggles = document.querySelectorAll('.menu-toggle');
            toggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const sottomenu = this.nextElementSibling;
                    sottomenu.classList.toggle('aperto');
                    if (sottomenu.classList.contains('aperto')) {
                        this.textContent = this.textContent.replace('▼', '▲');
                    } else {
                        this.textContent = this.textContent.replace('▲', '▼');
                    }
                });
            });
        }

        Promise.all([
            fetch('header.html').then(r => r.text()),
            fetch('sidebar.html').then(r => r.text())
        ]).then(([headerHTML, sidebarHTML]) => {
            document.getElementById('header-container').innerHTML = headerHTML;
            document.getElementById('sidebar-container').innerHTML = sidebarHTML;
            initHeader();
            initSidebar();
        })
            .then(r => r.text())
            .then(html => {
                document.getElementById('sidebar-container').innerHTML = html;
                initSidebar();
            });
    document.addEventListener("DOMContentLoaded", () => {
        // Seleziona tutte le celle dei giorni del calendario
        const cells = document.querySelectorAll(".calendar-table td");

        cells.forEach((cell, index) => {
            // Creiamo un ID univoco per ogni cella in base alla sua posizione
            // (Questo serve al browser per ricordarsi in quale giorno hai scritto la nota)
            const cellId = "calendario-giorno-" + index;

            // 1. CARICAMENTO: Controlla se c'è già un evento salvato per questo giorno
            const savedEvent = localStorage.getItem(cellId);
            if (savedEvent) {
                let eventSpan = document.createElement('span');
                eventSpan.className = 'event user-event';
                eventSpan.innerText = savedEvent;
                cell.classList.add('has-event');
                cell.appendChild(eventSpan);
            }

            // 2. INTERAZIONE: Cosa succede quando si clicca su un giorno
            cell.addEventListener("click", function(e) {
                // Cerca se c'è già un evento personalizzato in questa cella
                const existingUserEvent = this.querySelector('.user-event');
                const currentText = existingUserEvent ? existingUserEvent.innerText : "";
                
                // Mostra una finestra di dialogo per inserire o modificare la nota
                const nota = prompt("Aggiungi o modifica un evento per questo giorno (lascia vuoto per eliminare):", currentText);
                
                if (nota !== null) { // Se l'utente non ha premuto "Annulla"
                    if (nota.trim() === "") {
                        // Se ha lasciato vuoto, elimina l'evento
                        if (existingUserEvent) existingUserEvent.remove();
                        localStorage.removeItem(cellId); // Rimuove dalla memoria
                        
                        // Rimuove lo sfondo colorato se non ci sono altri eventi (es. quelli ufficiali)
                        if (!this.querySelector('.event')) {
                            this.classList.remove('has-event');
                        }
                    } else {
                        // Se ha scritto qualcosa, aggiungi o aggiorna l'evento
                        if (existingUserEvent) {
                            existingUserEvent.innerText = nota;
                        } else {
                            let newEvent = document.createElement('span');
                            newEvent.className = 'event user-event';
                            newEvent.innerText = nota;
                            this.classList.add('has-event');
                            this.appendChild(newEvent);
                        }
                        // Salva la nota nella memoria del browser
                        localStorage.setItem(cellId, nota);
                    }
                }
            });
        });
    });
</script>
</body>
</html>